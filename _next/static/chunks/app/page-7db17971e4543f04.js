(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7840:function(e,t,a){Promise.resolve().then(a.bind(a,9991))},9991:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var n=a(7437),r=a(368),c=a(7963),o=a(8682),i=a(205),l=a(2422),s=a(7871),u=a(9835),d=a(6910),h=a(2294),x=a(6514),v=a(4790),f=a(643),p=a(6906),y=a(23),m=a(7082),j=a(2265);async function C(e){let t=await fetch("https://portal.urbanclimb.com.au/uc-services/ajax/gym/occupancy.ashx?branch=".concat(e));if(!t.ok)throw Error("Network response was not ok");return t.json()}let A=new Map([["West End","D969F1B2-0C9F-49A9-B2AC-D7775642F298"],["Milton","690326F9-98CE-4249-BD91-53A0676A137B"],["Newstead","A3010228-DFC6-4317-86C0-3839FFDF3FD0"],["Collingwood","8674E350-D340-4AB3-A462-5595061A6950"],["Blackburn","46E5373C-2310-4520-B576-CCB4E4EF548D"],["Townsville","31D5CE53-0CA1-40A5-AEA6-65A72F786492"]]),g="Compare";function w(e){let t=(0,r.Z)(),a=(0,c.Z)(t.breakpoints.down("sm"));return(0,n.jsx)(o.Z,{value:e.selectedLocation,exclusive:!0,fullWidth:!0,size:"medium",orientation:a?"vertical":"horizontal",children:[...Array.from(A.keys()),g].map(t=>(0,n.jsx)(i.Z,{onClick:()=>e.setSelectedLocation(t),value:t,children:t},t))})}function F(e){return(0,n.jsx)("div",{style:{height:"300px"},children:(0,n.jsx)(h.a,{value:Math.round(e.occupancy),startAngle:-110,endAngle:110,valueMax:100,sx:{["& .".concat(x.mp.valueText)]:{fontSize:55,transform:"translate(0px, 0px)"},["& .".concat(x.mp.valueArc)]:{fill:e.fillColor}},text:e=>{let{value:t}=e;return"".concat(t,"%")}})})}function E(e){let t=A.get(e.selectedLocation)||"",[a,r]=(0,j.useState)(new Date);(0,j.useEffect)(()=>{let e=setInterval(()=>{r(new Date)},1e3);return()=>clearInterval(e)},[]);let{isPending:c,isError:o,data:i}=(0,f.a)({queryKey:["occupancy",t],refetchInterval:6e3,queryFn:()=>C(t)});return o?(0,n.jsxs)(l.Z,{severity:"error",children:["Failed to load occupancy data for: ",e.selectedLocation]}):c?(0,n.jsx)(s.Z,{}):i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.Z,{variant:"h4",children:["Status: ",i.Status]}),(0,n.jsxs)(u.Z,{variant:"subtitle1",children:["Last Updated: ",Math.floor(Math.abs(Number(a)-Number(new Date(i.LastUpdated)))/1e3)," seconds ago"]}),(0,n.jsx)(F,{occupancy:i.CurrentPercentage,fillColor:i.Colour})]}):void 0}function b(){let e=(0,p.h)({queries:Array.from(A.values()).map(e=>({queryKey:["occupancy",e],queryFn:()=>C(e)}))}),t=e.every(e=>e.isSuccess&&e.data),a=e.every(e=>e.isPending);if(void 0!==e.find(e=>e.isError))return(0,n.jsx)(l.Z,{severity:"error",children:"Failed to load occupancy data"});if(a)return(0,n.jsx)(d.Z,{disableShrink:!0});let r=e=>"".concat(e,"%");if(t)return(0,n.jsx)("div",{style:{width:"35em",height:"35em",margin:"auto"},children:(0,n.jsx)(v.v,{dataset:e.map(e=>{var t;return{percentage:e.data&&Math.floor(e.data.CurrentPercentage),location:null===(t=e.data)||void 0===t?void 0:t.Name}}),yAxis:[{max:100,min:0,valueFormatter:r}],xAxis:[{scaleType:"band",dataKey:"location"}],series:[{dataKey:"percentage",label:"Occupancy Capacity",valueFormatter:r}],sx:e.map((e,t)=>{var a;return{["& .MuiBarElement-root:nth-child(".concat(t+1,")")]:{fill:null===(a=e.data)||void 0===a?void 0:a.Colour}}})})})}let k=new y.S;function D(){let[e,t]=(0,j.useState)("West End");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{width:"100%",margin:"auto"},children:(0,n.jsx)(w,{selectedLocation:e,setSelectedLocation:t})}),(0,n.jsx)(m.aH,{client:k,children:(0,n.jsx)("div",{style:{margin:"auto",textAlign:"center",width:"60%",padding:30},children:e!==g?(0,n.jsx)(E,{selectedLocation:e}):(0,n.jsx)(b,{})})})]})}}},function(e){e.O(0,[672,971,69,744],function(){return e(e.s=7840)}),_N_E=e.O()}]);